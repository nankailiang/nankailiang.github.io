(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{561:function(t,a,s){"use strict";s.r(a);var e=s(7),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("clone命令可以指定很多参数，主要用到这些，你也可以使用git svn help查看完整的参数列表。")]),t._v(" "),s("div",{staticClass:"language-git extra-class"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[t._v("$ git svn clone https://172.16.0.241:8443/svn/xxx/"),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v(" -r")]),t._v(" 76896:HEAD"),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v(" --no")]),t._v("-metadata"),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v(" --authors")]),t._v("-file=svnuser.text"),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v(" --trunk")]),t._v("=svnproject"),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v(" --branches")]),t._v("=svnbranch yourGitProject")]),t._v("\n")])])]),s("ol",[s("li",[t._v("r指定起止版本号。")]),t._v(" "),s("li",[t._v("no-metadata阻止git导出SVN包含的一些无用信息。")]),t._v(" "),s("li",[t._v("authors-file必须指定svn帐号在git中的映射。")]),t._v(" "),s("li",[t._v("trunk指定导出仓库的主干项目路径。")]),t._v(" "),s("li",[t._v("branches指定svn的分支项目路径。\n"),s("strong",[t._v("注意")]),t._v("：clone命令需要管理员权限，否则会遇到下面的异常：")])]),t._v(" "),s("div",{staticClass:"language-git extra-class"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[t._v("couldn't truncate file .... at line 1393. \n")])])]),s("p",[t._v("你要做的就是右键使用管理员身份运行CMD，然后使用fatch继续执行导出。")]),t._v(" "),s("div",{staticClass:"language-git extra-class"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[t._v("$ git svn fatch"),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v(" -r")]),t._v(" 76896:HEAD"),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v(" --authors")]),t._v("-file=svnuser.text")]),t._v("\n")])])]),s("p",[t._v("当然这并不是唯一的坑，你还有可能会遇到下边的错误：")]),t._v(" "),s("div",{staticClass:"language-git extra-class"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[t._v(" 0 [main] perl 24432 cygwin_exception::open_stackdumpfile: Dumping stack trace to perl.exe.stackdump\n fatal: malformed index info 100644 362f1c18ceed5d593eb021432545685283a93 \n")])])]),s("p",[t._v("要解决这个问题，请打开隐藏项目找到.git/config文件，文件大概长这个样子:")]),t._v(" "),s("div",{staticClass:"language-git extra-class"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[t._v("[core]\n\trepositoryformatversion = 0\n\tfilemode = false\n\tbare = false\n\tlogallrefupdates = true\n\tsymlinks = false\n\tignorecase = true\n\thideDotFiles = dotGitOnly\n\tlongpaths = true\n[svn-remote "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"svn"')]),t._v("]\n...\n")])])]),s("p",[t._v("重要的就是longpaths = true这一句，然后fatch继续。\nfetch之后通过git log你会发现看不到新的log，这是因为fetch之后并不会自动将代码合并到当前master,我们查看一下所有的分支")]),t._v(" "),s("div",{staticClass:"language-git extra-class"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[t._v("$ git branch"),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v(" -a")])]),t._v("\n\n* master\n  remotes/origin/trunk\n")])])]),s("p",[t._v("可以看到有一个远程分支，这个就是SVN产生的分支，查看一下log")]),t._v(" "),s("div",{staticClass:"language-git extra-class"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[t._v("$ git log remotes/origin/trunk")]),t._v("\n")])])]),s("p",[t._v("LOG中显示了SVN最新的提交日志，我们需要手动合并到master上,然后查看日志包含了最新的提交。")]),t._v(" "),s("div",{staticClass:"language-git extra-class"},[s("pre",{pre:!0,attrs:{class:"language-git"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[t._v("$ git merge remotes/origin/trunk")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token command"}},[t._v("$ git log")]),t._v("\n")])])]),s("p",[t._v("到此迁移已经完成，接下来添加GIT远程地址，放心将代码push到GIT服务器吧。")])])}),[],!1,null,null,null);a.default=n.exports}}]);